doctrine FreeIndexMustFail where {
  mode M;
  mode I;
  index_mode I;

  type Nat @I;
  index_fun Z : Nat @I;

  type Vec(n : Nat) @M;

  gen make(n : Nat) : [] -> [Vec(n)] @M;
}

run main where {
  doctrine FreeIndexMustFail;
  mode M;
  show normalized;
}
---
make
