import "../../lib/modes/staging_mode_map.llang";

pipeline legacy_main where {
  normalize;
  apply StageToStage2;
  extract diagram;
}

run main using legacy_main where {
  source doctrine Staging;
  source surface StageExpr;
}
---
stage
---

pipeline legacy_ct where {
  normalize;
  apply StageToStage2;
  extract diagram;
}

run ct using legacy_ct where {
  source doctrine Staging;
  source surface StageExprCT;
}
---
stageq
---
